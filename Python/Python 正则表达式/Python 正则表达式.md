# Python 正则表达式

- [概览](#概览)
- [使用步骤](#使用步骤)
- [常用方法](#常用方法)
- [匹配模式](#匹配模式)
- [正则符号](#正则符号)
- [字符分类](#字符分类)

## 概览

![](https://ws4.sinaimg.cn/large/006tKfTcgy1fhlumvwqtrj31hu0shwox.jpg)

## 使用步骤

1. import re
2. 使用 `re.complie()` 创建一个 Regex 对象
3. 向 Regex 对象调用 `search()`, 返回一个 Match 对象，对 Match 对象调用 `group()`, 返回匹配的字符串
    - group() 或 group(0) 返回整个匹配的文本
    - group(1) 获取第一个分组
    - groups() 返回多个值的元组

## 常用方法

### regex.search()

- 传入查找的字符串
- 返回一个 Match 对象

### regex.findall()

- 若正则表达式没有分组，返回一个字符串列表
- 若正则表达式有分组，返回一个元组的列表，一个元组是符合分组的若干个字符串

### re.complie()

- 第一个参数，为正则表达式字符串
- 第二个参数，匹配选项
    - re.DOTALL 让句点匹配所有字符，包括换行符
    - re.IGNORECASE 或 re.I 不区分大小写
    - re.VERBOSE 在复杂的正则表达式中写注释

    ```py
    phoneRegex = re.complie(r'''(
        (\d{3}|\(\d{3}\))? # area code
        (\s|-|\.)? # separator
        \d{3} # first 3 digits
        (\s|-|\.) # separator
        \d{4} # last 4 digits
        (\s*(ext|x|ext.)\s*\d{2,5})? # extension
        )''', re.VERBOSE)
    ```
    
- 组合使用选项，使用 `|` 管道符进行位运算

### regex.sub()

- 找到匹配文本并进行替换

## 匹配模式

### 贪心（默认）

在有二义的情况下，尽可能匹配最长的字符串

### 非贪心

- 尽可能匹配最短的字符串
- 使用 `?` 符号

    ```py
    r'(Ha){3,5}?'
    ```

## 正则符号

### `|`

- 管道
	- 匹配多个表达式中的一个，使用 | 将多个表达式串联

### `?`

- 可选匹配，匹配零次或一次
- 声明非贪心匹配

### `*`

- 匹配零次或多次

### `+`

- 匹配一次或多次

### `{}` 

- 匹配特定次数
- {m,n}

### `[]`

- 字符分类
	- 可以使用短横表示字母或数字的范围
	- 普通的正则表达式符号不会被解释，即不需要用到转义字符

### `^`

- 插入字符
	- 在 [] 中，表示非字符类
	- 正则表达式开头，匹配发生在被查找文本的开始处

### `$`

- 字符串必须以正则表达式的模式结束

### `.`

- 通配符
	- 匹配除换行符之外的所有字符
	- 只匹配一个字符

## 字符分类

### `\d`

- 0 到 9 的任何数字

### `\D`

- 除 0 到 9 的数字以外的任何字符

### `\w`

- 任何字母、数字或下划线字符（可以做变量名的那些字符）

### `\W`

- 除字母、数字和下划线意外的任何字符

### `\s`

- 空格、制表符或换行符（空白符号）

### `\S`

- 除空格、制表符和换行符以外的任何字符

